---
title: "版本规范"
description: ""
lead: ""
date: 2022-12-01T08:30:34+08:00
lastmod: 2022-12-01T08:30:34+08:00
draft: false
images: []
menu:
  docs:
    parent: "dev-guide"
    identifier: "version-31442016dcf82700cff2d25638f67dfa"
weight: 10
toc: true
---

# 版本号规范

主版本号.次版本号.修订号（X.Y.Z），其中 X、Y 和 Z 为非负的整数，且禁止在数字前方补零。
版本号可按以下规则递增：
* 主版本号（MAJOR）：当做了不兼容的 API 修改。
* 次版本号（MINOR）：当做了向下兼容的功能性新增及修改。有功能被弃用了也要增加版本号。
* 修订号（PATCH）：当做了向下兼容的问题修正，即Bug修正。

其它细节参考[语义化版本号](https://semver.org/lang/zh-CN/)

# 版本规范

版本分三种：
- 测试版本：供测试环节使用，只部署在测试环境
- 预发布版本：在准备版本的环节使用，可部署在测试环境、预发布环境
- 生产版本：供生产环境使用，可部署在任意的环境

## 测试版本

- 命名规范：x.y.0+commitRef
- 来源分支：develop, feature/*
- 部署环境：
  - 开发环境
  - 测试环境

## 预发布版本
- 命名规范：x.y.z-pre-release
- 来源分支：main
- 部署环境：
  - 开发环境
  - 测试环境
  - 预发布环境

## 正式版本
- 命名规范：x.y.z
- 来源：预发布版本
- 部署环境：
  - 开发环境
  - 测试环境
  - 预发布环境
  - 正式环境

# 讨论
## 版本号变更规范

版本号变更主要在main分支上，develop分支的版本号是同步于main分支的版本号，同步的时机是主版本号和次版本号发生变化时。


## 预发布版本转正

预发布版本通过验收之后，该预发布版本就可以转为正式版本


## 版本...具体是什么？

- git仓库里的Tag
- Docker镜像


